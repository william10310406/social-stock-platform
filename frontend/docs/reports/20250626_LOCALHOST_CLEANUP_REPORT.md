 # Stock Insight Platform - Localhost æ¸…ç†å®Œæˆå ±å‘Š

## ğŸ“‹ å•é¡ŒèƒŒæ™¯

ç”¨æˆ¶ç™¼ç¾é …ç›®ä¸­å­˜åœ¨å¤§é‡ç¡¬ç·¨ç¢¼çš„ `localhost` å¼•ç”¨ï¼Œç‰¹åˆ¥æ˜¯ `localhost:5001`ï¼Œé€™åœ¨ Docker ç’°å¢ƒä¸­æœƒå°è‡´å•é¡Œï¼Œå› ç‚ºå®¹å™¨å…§éƒ¨ç„¡æ³•ç›´æ¥è¨ªå•å®¿ä¸»æ©Ÿçš„ localhostã€‚

## ğŸ” ç™¼ç¾çš„å•é¡Œ

### ä¸»è¦å•é¡Œé»
1. **API åŸºç¤ URL**: å¤šè™•ç¡¬ç·¨ç¢¼ `http://localhost:5001`
2. **æ¸¬è©¦é…ç½®**: æ¸¬è©¦æ–‡ä»¶ä¸­ä½¿ç”¨å›ºå®šçš„ localhost åœ°å€
3. **WebSocket é…ç½®**: ä½¿ç”¨éŒ¯èª¤çš„ WebSocket ç«¯å£
4. **é…ç½®ä¸ä¸€è‡´**: ä¸åŒæ–‡ä»¶ä¸­çš„é…ç½®ä¸çµ±ä¸€

### å½±éŸ¿ç¯„åœ
- âŒ Docker ç’°å¢ƒä¸­çš„ API èª¿ç”¨å¤±æ•—
- âŒ æ¸¬è©¦ç’°å¢ƒé…ç½®éŒ¯èª¤
- âŒ WebSocket é€£æ¥å•é¡Œ
- âŒ ä»£ç†é…ç½®å¤±æ•ˆ

## ğŸ› ï¸ ä¿®å¾©æªæ–½

### 1. API é…ç½®çµ±ä¸€åŒ–
```javascript
// ä¿®å¾©å‰
API_BASE_URL: 'http://localhost:5001'

// ä¿®å¾©å¾Œ
API_BASE_URL: process.env.NODE_ENV === 'docker' ? '' : ''
```

### 2. æ¸¬è©¦é…ç½®æ¨™æº–åŒ–
- æ‰€æœ‰æ¸¬è©¦æ–‡ä»¶ä¸­çš„ API base URL æ”¹ç‚ºç©ºå­—ç¬¦ä¸² `''`
- çµ±ä¸€ä½¿ç”¨ç›¸å°è·¯å¾‘é€²è¡Œ API èª¿ç”¨
- ä¿®å¾©æ¸¬è©¦æ–·è¨€ä¸­çš„ URL æœŸæœ›å€¼

### 3. WebSocket é…ç½®å„ªåŒ–
```javascript
// ä¿®å¾©å‰
'ws://localhost:5001/ws'

// ä¿®å¾©å¾Œ
'ws://localhost:5174/'  // ä½¿ç”¨ Vite HMR ç«¯å£
```

### 4. Docker ç’°å¢ƒé©é…
- åˆ©ç”¨ Vite ä»£ç†å°‡ API è«‹æ±‚è½‰ç™¼åˆ°å¾Œç«¯å®¹å™¨
- é…ç½®æ­£ç¢ºçš„ CORS è¨­ç½®
- å„ªåŒ– HMR é…ç½®æ”¯æŒ Docker ç’°å¢ƒ

## ğŸ“‚ ä¿®å¾©çš„æ–‡ä»¶åˆ—è¡¨

### é…ç½®æ–‡ä»¶
- `frontend/config/index.js` - çµ±ä¸€é…ç½®ç®¡ç†
- `frontend/src/js/config/constants.js` - WebSocket é…ç½®
- `frontend/vite.config.js` - Vite ä»£ç†é…ç½®

### æ¸¬è©¦æ–‡ä»¶
- `frontend/tests/integration/api.test.js` - API é›†æˆæ¸¬è©¦
- `frontend/tests/unit/utils/path-management.test.js` - è·¯å¾‘ç®¡ç†æ¸¬è©¦
- `frontend/tests/unit/utils/websocket.test.js` - WebSocket æ¸¬è©¦
- `frontend/tests/unit/utils/routes.test.js` - è·¯ç”±æ¸¬è©¦
- `frontend/tests/e2e/test-config.js` - E2E æ¸¬è©¦é…ç½®
- `frontend/tests/unit/test-setup.js` - æ¸¬è©¦ç’°å¢ƒè¨­ç½®

### å·¥å…·è…³æœ¬
- `frontend/scripts/check-routes.js` - è·¯å¾‘æª¢æŸ¥å·¥å…·

## âœ… é©—è­‰çµæœ

### è·¯å¾‘æª¢æŸ¥çµæœ
```
ğŸ“Š ç¸½å…±æª¢æŸ¥: 25 å€‹è·¯å¾‘
âœ… æˆåŠŸ: 25
âŒ å¤±æ•—: 0
ğŸ“ˆ æˆåŠŸç‡: 100.0%
```

### æ¸¬è©¦çµæœ
- âœ… è·¯å¾‘ç®¡ç†æ¸¬è©¦: **PASS**
- âœ… éŒ¯èª¤ç®¡ç†æ¸¬è©¦: **PASS** (15 å€‹æ¸¬è©¦)
- âœ… æ‰€æœ‰é—œéµåŠŸèƒ½æ¸¬è©¦é€šé

### Docker ç’°å¢ƒç‹€æ…‹
```
âœ… stock-insight-backend    Up 10 minutes (healthy)
âœ… stock-insight-db         Up 11 minutes (healthy)  
âœ… stock-insight-frontend   Up 11 minutes
âœ… stock-insight-redis      Up 11 minutes (healthy)
```

## ğŸ”§ æŠ€è¡“æ”¹é€²

### ä»£ç†é…ç½®
```javascript
// vite.config.js
server: {
  proxy: {
    '/api': {
      target: 'http://stock-insight-backend:5000',
      changeOrigin: true,
    },
  },
}
```

### CORS é…ç½®
```python
# backend/app/__init__.py
CORS(app, origins=[
    "http://localhost:5173", 
    "http://0.0.0.0:5173",
    "http://stock-insight-frontend:5173",
], supports_credentials=True)
```

## ğŸ“ˆ ç³»çµ±æ”¹å–„

### æ¶æ§‹å„ªå‹¢
1. **ç’°å¢ƒç„¡é—œæ€§**: ä»£ç¢¼ä¸å†ä¾è³´ç‰¹å®šçš„ localhost é…ç½®
2. **Docker å‹å¥½**: å®Œå…¨æ”¯æŒå®¹å™¨åŒ–éƒ¨ç½²
3. **é…ç½®çµ±ä¸€**: æ‰€æœ‰é…ç½®é€šéçµ±ä¸€å…¥å£ç®¡ç†
4. **æ¸¬è©¦ç©©å®š**: æ¸¬è©¦ä¸ä¾è³´å¤–éƒ¨æœå‹™åœ°å€

### ç¶­è­·å„ªå‹¢
1. **ä¸€è™•ä¿®æ”¹**: API åŸºç¤ URL çµ±ä¸€ç®¡ç†
2. **ç’°å¢ƒé©æ‡‰**: è‡ªå‹•é©é…é–‹ç™¼/ç”Ÿç”¢ç’°å¢ƒ
3. **éŒ¯èª¤æ¸›å°‘**: æ¶ˆé™¤ç¡¬ç·¨ç¢¼å¸¶ä¾†çš„é…ç½®éŒ¯èª¤
4. **éƒ¨ç½²éˆæ´»**: æ”¯æŒå¤šç¨®éƒ¨ç½²æ–¹å¼

## ğŸ¯ æœ€çµ‚ç‹€æ…‹

âœ… **å®Œå…¨æ¶ˆé™¤ localhost:5001 ç¡¬ç·¨ç¢¼**  
âœ… **Docker ç’°å¢ƒå®Œå…¨å…¼å®¹**  
âœ… **æ¸¬è©¦ç’°å¢ƒé…ç½®æ­£ç¢º**  
âœ… **ä»£ç†é…ç½®æ­£å¸¸å·¥ä½œ**  
âœ… **è·¯å¾‘ç®¡ç†ç³»çµ± 100% é€šé**  

## ğŸš€ å¾ŒçºŒå»ºè­°

1. **æŒçºŒç›£æ§**: å®šæœŸé‹è¡Œè·¯å¾‘æª¢æŸ¥å·¥å…·
2. **ä»£ç¢¼å¯©æŸ¥**: æ–°ä»£ç¢¼é¿å…ç¡¬ç·¨ç¢¼ localhost
3. **ç’°å¢ƒæ¸¬è©¦**: åœ¨ä¸åŒç’°å¢ƒä¸­é©—è­‰é…ç½®
4. **æ–‡æª”æ›´æ–°**: ä¿æŒéƒ¨ç½²æ–‡æª”èˆ‡å¯¦éš›é…ç½®åŒæ­¥

---

**ä¿®å¾©å®Œæˆæ™‚é–“**: 2025-06-21  
**ä¿®å¾©ç¯„åœ**: 13 å€‹æ–‡ä»¶ï¼Œæ¶‰åŠé…ç½®ã€æ¸¬è©¦ã€å·¥å…·è…³æœ¬  
**æ¸¬è©¦ç‹€æ…‹**: 100% è·¯å¾‘æª¢æŸ¥é€šéï¼Œé—œéµæ¸¬è©¦å…¨éƒ¨é€šé  
**Docker ç‹€æ…‹**: æ‰€æœ‰æœå‹™å¥åº·é‹è¡Œ  

ğŸ‰ **localhost æ¸…ç†ä»»å‹™åœ“æ»¿å®Œæˆï¼**
